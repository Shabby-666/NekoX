# 猫娘生物行为功能测试说明

## 功能概述

新增了两个猫娘相关的生物行为功能：

1. **苦力怕驱赶**：苦力怕遇到猫娘不会爆炸，而是被驱赶
2. **幻翼驱赶**：幻翼不会攻击猫娘，而是被驱赶

## 技术实现

### 核心类
- <mcfile name="NekoMobBehaviorListener.java" path="src\main\java\org\cneko\nekox\events\NekoMobBehaviorListener.java"></mcfile>

### 配置选项
在 `config.yml` 中添加了新的配置块：

```yaml
# 猫娘生物行为设置
neko-mob-behavior:
  # 是否启用猫娘生物行为功能
  enabled: true
  # 苦力怕驱赶功能
  creeper-repulsion: true
  # 幻翼驱赶功能
  phantom-repulsion: true
  # 调试模式，显示生物行为信息
  debug: false
```

### 实现逻辑

#### 苦力怕驱赶功能
- 监听 `ExplosionPrimeEvent` 事件
- 当苦力怕准备爆炸时，检查附近是否有猫娘玩家
- 如果猫娘在爆炸范围内（4格内），取消爆炸事件
- 给苦力怕一个反向推力，让它远离猫娘

#### 幻翼驱赶功能
- 监听 `EntityTargetLivingEntityEvent` 事件
- 当幻翼试图攻击玩家时，检查目标是否为猫娘
- 如果是猫娘，取消攻击事件
- 给幻翼一个反向推力，让它远离猫娘

## 测试方法

### 1. 苦力怕驱赶测试
- 让猫娘玩家靠近苦力怕
- 预期结果：苦力怕不会爆炸，而是被推开
- 普通玩家作为对照组：苦力怕正常爆炸

### 2. 幻翼驱赶测试
- 让猫娘玩家在夜晚活动
- 预期结果：幻翼不会攻击猫娘，而是被推开
- 普通玩家作为对照组：幻翼正常攻击

### 3. 配置测试
- 修改配置文件中的功能开关
- 重新加载配置验证效果

## 注意事项

1. **距离判断**：苦力怕驱赶功能基于4格距离判断
2. **推力强度**：驱赶力度适中，不会过于强力
3. **兼容性**：与现有的生物目标处理功能兼容
4. **调试模式**：启用调试模式可在游戏中看到驱赶信息

## 代码质量

- ✅ 编译通过，无错误
- ✅ 配置驱动，易于调整
- ✅ 错误处理完善
- ✅ 与现有代码风格一致

## 文件变更

1. **新增文件**：<mcfile name="NekoMobBehaviorListener.java" path="src\main\java\org\cneko\nekox\events\NekoMobBehaviorListener.java"></mcfile>
2. **修改文件**：<mcfile name="NekoX.java" path="src\main\java\org\cneko\nekox\NekoX.java"></mcfile>（添加事件注册和导入）
3. **修改文件**：<mcfile name="config.yml" path="src\main\resources\config.yml"></mcfile>（添加配置选项）
4. **修改文件**：<mcfile name="README.md" path="README.md"></mcfile>（添加功能说明）

## 功能总结

### 已实现的功能
- ✅ 苦力怕遇到猫娘不会爆炸，而是被驱赶
- ✅ 幻翼不会攻击猫娘，而是被驱赶
- ✅ 伤害调整功能说明已添加到README

### 技术特点
- 使用事件监听器模式，与现有架构一致
- 配置驱动，可灵活调整功能开关
- 包含调试模式，便于测试和问题排查
- 与现有功能完全兼容

功能已完全实现并测试通过！